<html>
<head>
    <title>Non-Eval Self-Test</title>

    <link rel="stylesheet" media="all" href="../assets/stylesheets/bennett.css" />
    <link rel="stylesheet" media="all" href="../assets/jquery-ui-1.10.3/css/le-frog/jquery-ui-1.10.3.custom.css" />
    <link rel="stylesheet" media="all" href="assets/stylesheets/prettify.css" />
    <link rel="stylesheet" media="all" href="../assets/fonts/jolly-lodger.css" />

    <script src="../assets/javascripts/piggybank-0.0.1/jquery.js"></script>
    <script src="assets/javascripts/prettify.js"></script>


</head>
<body>
    <h1 class="bennett">Bennett: Non-Eval Self-Test</h1>

    <div id="results">
        <pre><code class="prettyprint"></code></pre>
    </div>

    <script type="text/javascript">

    $(function(){

        var config = {
            one: {
                two: {
                    three: "a string"
                }
            }
        };

        var path = "one.two.three";

        var eval_string = eval("config." + path);
        var find_string = resolve(config, path);

        $("#results pre code").append("using eval : " + eval_string);
        $("#results pre code").append("\n\r\n\r");
        prettyPrint();

        $("#results pre code").append("using find : " + find_string);
        $("#results pre code").append("\n\r\n\r");
        prettyPrint();

        function resolve(base, path) { 
            if(base === undefined) return undefined;
            var levels = path.split(".");
            var result = base;
            for(var i=0; i<levels.length; i++) { 
                var level = levels[i];
                if(result[level]!==undefined) { 
                    result = result[level];
                }
                else { 
                    console.log("Unable to resolve " + path);
                    return undefined;
                }
            }
            return result;
        };

    });

    </script>
</body>
</html>