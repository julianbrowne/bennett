<html>
<head>
    <title>Bennett</title>

    <!-- TheGrid -->
    <script src="assets/thegrid/thegrid.js"></script>
    <link rel="stylesheet" media="all" href="assets/thegrid/thegrid.css" />

    <!-- JSResolve -->
    <script src="assets/jsresolve/jsresolve.js"></script>

    <!-- Bennett -->
    <link rel="stylesheet" media="all" href="assets/stylesheets/bennett.css" />
    <link rel="stylesheet" media="all" href="assets/jquery-ui/css/le-frog/jquery-ui-1.10.3.custom.css" />
    <link rel="stylesheet" media="all" href="assets/fonts/bennett-title.css" />
    <link rel="stylesheet" media="all" href="assets/stylesheets/api-doc.css" />
    <script src="assets/javascripts/jquery-2.0.3.js"></script>
    <script src="assets/jquery-ui/js/jquery-ui-1.10.3.custom.js"></script>
    <script src="assets/javascripts/js-yaml-2.1.0.js"></script>
    <script src="assets/javascripts/bennett.js"></script>

    <!-- Piggybank -->
    <script src="assets/piggybank/jquery.cookie.js"></script>
    <script src="assets/piggybank/tv4.js"></script>
    <script src="assets/piggybank/uritemplate.js"></script>
    <script src="assets/piggybank/piggybank.js"></script>

    <!-- Test -->
    <link rel="stylesheet" media="all" href="test/assets/stylesheets/prettify-obsidian.css" />
    <link rel="stylesheet" type="text/css" href="test/assets/jasmine-1.3.1/lib/jasmine-1.3.1/jasmine.css">

    <script src="test/assets/jasmine-1.3.1/lib/jasmine-1.3.1/jasmine.js"></script>
    <script src="test/assets/javascripts/jasmine.before-all.js"></script>
    <script src="test/assets/jasmine-1.3.1/lib/jasmine-1.3.1/jasmine-html.js"></script>
    <script src="test/assets/jasmine-1.3.1/lib/jasmine-1.3.1/mock-ajax.js"></script>
    <script src="test/assets/javascripts/mockjax.js"></script>
    <script src="test/assets/javascripts/prettify.js"></script>
    <script src="test/spec/specHelper.js"></script>
    <script src="test/spec/bennettSpec.js"></script>
    <script src="test/spec/piggybankSpec.js"></script>

</head>
<body>
    <h1 class="bennett">Bennett: REST API Verifier</h1>
    <div id="tabs">
        <ul>
            <li><a href="#tab1" class="bennett">Verify</a></li>
            <li><a href="#tab2" class="bennett">Log</a></li>
            <li><a href="#tab3" class="bennett">Documentation</a></li>
            <li><a href="test/index.html" class="bennett">Self-Test</a></li>
            <li><a href="test/swagger.html" class="bennett">Swagger</a></li>
        </ul>
        <div id="tab1">
            <h2 id="test-name">Test Results</h2>
            <div class="bbutton" id="start-tests">start</div>
            <div id="test-results"></div>
        </div>
        <div id="tab2">
            <h2>Test Log</h2>
            <div class="bbutton" id="clear-log">clear</div>
            <ul id="test-log">
            </ul>
        </div>
        <div id="tab3">
            <h2>API Documentation</h2>
            <div class="bbutton" id="build-doc">build</div>
            <div id="api-doc" class="doc calls"></div>
        </div>
    </div>

    <script type="text/javascript">
        $(function() { 

            $("#tabs").tabs({ 
                beforeLoad: function( event, ui ) { 
                    if (ui.tab.data("loaded")) { 
                        event.preventDefault();
                        return;
                    }
                    ui.jqXHR.success(function() { 
                        ui.tab.data("loaded", true);
                    });
                }
            });

            var openweathermap = { 
                data: "data/openweathermap/data.yml",
                api: "data/openweathermap/api.yml",
                scenarios: "data/openweathermap/scenarios.yml"
            };

            var example = { 
                data: "data/login_example/data.yml",
                api: "data/login_example/api.yml",
                scenarios: "data/login_example/scenarios.yml"
            };

            var config = example; //openweathermap;

            var data = config.data;
            var api = config.api;
            var scenarios = config.scenarios;

            var harness = new Bennett(data, api, scenarios);

            harness.stopOnFailure = false; // default to true: stops if last scenario fails
            harness.targetElement("#test-results");

            $("#start-tests").click(function(e) { 
                $("#start-tests").hide();
                harness.runTests();
            });

            $("#build-doc").click(function(e) { 
                $("#build-doc").hide();
                harness.documentApi("#api-doc");
            });

            $("#clear-log").click(function(e) { 
                $("#test-log").empty();
            });

        });
    </script>
</body>
</html>